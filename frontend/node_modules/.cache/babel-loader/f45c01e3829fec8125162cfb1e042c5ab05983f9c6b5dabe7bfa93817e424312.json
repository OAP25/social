{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\social\\\\frontend\\\\src\\\\components\\\\Home.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport PostCard from \"./PostCard\";\nimport CreatePost from \"./CreatePost\";\nimport \"./Home.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = ({\n  user\n}) => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n  const fetchPosts = async (pageNum = 1) => {\n    try {\n      const response = await axios.get(`/posts?page=${pageNum}&limit=10`);\n      if (pageNum === 1) {\n        setPosts(response.data.posts);\n      } else {\n        setPosts(prev => [...prev, ...response.data.posts]);\n      }\n      setHasMore(response.data.pagination.page < response.data.pagination.pages);\n      setPage(pageNum);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handlePostCreated = () => {\n    fetchPosts(1); // Refresh posts\n  };\n  const handleLike = async postId => {\n    try {\n      const response = await axios.post(`/posts/${postId}/like`);\n      setPosts(posts.map(post => post._id === postId ? {\n        ...post,\n        likes: response.data.liked ? [...post.likes, user.id] : post.likes.filter(id => id !== user.id)\n      } : post));\n    } catch (error) {\n      console.error(\"Error liking post:\", error);\n    }\n  };\n  const handleComment = async (postId, content) => {\n    try {\n      const response = await axios.post(`/posts/${postId}/comments`, {\n        content\n      });\n      setPosts(posts.map(post => post._id === postId ? {\n        ...post,\n        comments: [...post.comments, response.data.comment]\n      } : post));\n    } catch (error) {\n      console.error(\"Error adding comment:\", error);\n    }\n  };\n  const loadMore = () => {\n    if (hasMore && !loading) {\n      fetchPosts(page + 1);\n    }\n  };\n  if (loading && posts.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home-content\",\n      children: [/*#__PURE__*/_jsxDEV(CreatePost, {\n        user: user,\n        onPostCreated: handlePostCreated\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"posts-container\",\n        children: [posts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-posts\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"No posts yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Be the first to share something!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this) : posts.map(post => /*#__PURE__*/_jsxDEV(PostCard, {\n          post: post,\n          currentUser: user,\n          onLike: handleLike,\n          onComment: handleComment\n        }, post._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this)), hasMore && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadMore,\n          className: \"load-more-btn\",\n          disabled: loading,\n          children: loading ? \"Loading...\" : \"Load More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"/e5dBJMYJFdkuqLD6duurv0dPq4=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","axios","PostCard","CreatePost","jsxDEV","_jsxDEV","Home","user","posts","setPosts","loading","setLoading","page","setPage","hasMore","setHasMore","fetchPosts","pageNum","response","get","data","prev","pagination","pages","error","console","handlePostCreated","handleLike","postId","post","map","_id","likes","liked","id","filter","handleComment","content","comments","comment","loadMore","length","className","children","fileName","lineNumber","columnNumber","onPostCreated","currentUser","onLike","onComment","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/OneDrive/Desktop/social/frontend/src/components/Home.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport PostCard from \"./PostCard\"\nimport CreatePost from \"./CreatePost\"\nimport \"./Home.css\"\n\nconst Home = ({ user }) => {\n  const [posts, setPosts] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [page, setPage] = useState(1)\n  const [hasMore, setHasMore] = useState(true)\n\n  useEffect(() => {\n    fetchPosts()\n  }, [])\n\n  const fetchPosts = async (pageNum = 1) => {\n    try {\n      const response = await axios.get(`/posts?page=${pageNum}&limit=10`)\n\n      if (pageNum === 1) {\n        setPosts(response.data.posts)\n      } else {\n        setPosts((prev) => [...prev, ...response.data.posts])\n      }\n\n      setHasMore(response.data.pagination.page < response.data.pagination.pages)\n      setPage(pageNum)\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handlePostCreated = () => {\n    fetchPosts(1) // Refresh posts\n  }\n\n  const handleLike = async (postId) => {\n    try {\n      const response = await axios.post(`/posts/${postId}/like`)\n\n      setPosts(\n        posts.map((post) =>\n          post._id === postId\n            ? {\n                ...post,\n                likes: response.data.liked ? [...post.likes, user.id] : post.likes.filter((id) => id !== user.id),\n              }\n            : post,\n        ),\n      )\n    } catch (error) {\n      console.error(\"Error liking post:\", error)\n    }\n  }\n\n  const handleComment = async (postId, content) => {\n    try {\n      const response = await axios.post(`/posts/${postId}/comments`, { content })\n\n      setPosts(\n        posts.map((post) =>\n          post._id === postId ? { ...post, comments: [...post.comments, response.data.comment] } : post,\n        ),\n      )\n    } catch (error) {\n      console.error(\"Error adding comment:\", error)\n    }\n  }\n\n  const loadMore = () => {\n    if (hasMore && !loading) {\n      fetchPosts(page + 1)\n    }\n  }\n\n  if (loading && posts.length === 0) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"home-container\">\n      <div className=\"home-content\">\n        <CreatePost user={user} onPostCreated={handlePostCreated} />\n\n        <div className=\"posts-container\">\n          {posts.length === 0 ? (\n            <div className=\"no-posts\">\n              <h3>No posts yet</h3>\n              <p>Be the first to share something!</p>\n            </div>\n          ) : (\n            posts.map((post) => (\n              <PostCard key={post._id} post={post} currentUser={user} onLike={handleLike} onComment={handleComment} />\n            ))\n          )}\n\n          {hasMore && (\n            <button onClick={loadMore} className=\"load-more-btn\" disabled={loading}>\n              {loading ? \"Loading...\" : \"Load More\"}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Home\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}